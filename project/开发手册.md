# 文件设计和函数解释

## 全局变量

|      名字      |  类型  |                            意义                            |
| :------------: | :----: | :--------------------------------------------------------: |
|   goods_map    | MyPair | first记录价值（value），second记录第几帧这个位置的货物消失 |
|     money      |  int   |                         当前赚的钱                         |
| boat_capacity  |  int   |                          船的容量                          |
| dis[x] [y] [z] | short  |           点x,y到z号港口的最短路（-1表示不可达）           |
|   berth[10]    | Berth  |                          十个泊位                          |
|   robot[10]    | Robot  |                         十个机器人                         |
|    boat[10]    |  Boat  |                           十个船                           |
|    dx_dy[4]    | MyPair |                       上下左右的移动                       |

## my_data_structure

该文件定义了一些我们经常使用的数据结构

- MyPair：等价于pair<int, int> ， 重载了加减和输出。
- 结构体Plan，里面存储了机器人现在去取货物需要花费代价的信息，如物品价值、寻路时间，机器人编号和目标地点，重载了小于号用来为优先队列服务，为以后的启发式打下基础。

## search_policy

- Search_Policy类

| 类中函数/变量 |                   说明                   |
| :-----------: | :--------------------------------------: |
|    Policy     |        一个存了Plan类型的优先队列        |
|   choose()    | 启发式，为每个机器人选择一个合适的货物地 |



## record

- check_valid检查该点在边界内且不是海洋和障碍物
- Robot类

|         类中变量/函数         |                             说明                             |
| :---------------------------: | :----------------------------------------------------------: |
|              x,y              |                           当前位置                           |
|       target_x,target_y       |                  目标位置（-1代表没有目标）                  |
|             goods             |                  是否携带物品（0没有，1有）                  |
|            status             |           状态（0表示恢复状态（碰撞），1正常运行）           |
|      pre，nxt[205] [205]      | 记录了该机器人到target的路径，nxt表示这步之后该去哪，pre表示这步之前在哪 |
| Robot(int startX, int startY) |                          初始化函数                          |
|        robot_control()        |                        控制机器人移动                        |
|         find_goods()          | 机器人通过BFS搜寻货物，然后记录可能的货物到Search_Policy中的堆Policy中，以便后续选择哪个机器人去拿哪个货物 |
|         find_berth()          | 机器人手中有货物，需要寻找一个需要去的泊位，并更新nxt来给定路径 |
|          find_road()          |      给定target让机器人从当前位置寻找路径，更新pre和nxt      |

- Berth类

| 类中变量/函数  |           说明           |
| :------------: | :----------------------: |
|      x,y       |        泊位的坐标        |
| transport_time |   该泊位到虚拟点的时间   |
| loading_speed  | 一帧可以装几个物品到船上 |
|      num       |     该泊位有多少货物     |

- Boat类

| 类中变量/函数 |                            说明                             |
| :-----------: | :---------------------------------------------------------: |
|      num      |                     船上当前有多少货物                      |
|      pos      |             目标泊位，如果目标是虚拟点则pos为-1             |
|    status     | 0表示移动，1表示装货状态或运输完成状态，2表示泊位外等待状态 |
| boat_control  |                 ==待实现==，控制船前往泊位                  |

## my_algorithm

|      函数      |                       说明                       |
| :------------: | :----------------------------------------------: |
|    init_dis    |        初始化地图上每个点到十个泊位的距离        |
| player_control | ==待实现，终极目标之一！！！==控制多个机器人协作 |

